<h1>Productos </h1>

	<p>Seleccione el criterio que desea para filtrar los resultados </p>
	<%= form_for :product, url: lookup_admin_products_path, html: {class: "form-search"} do |form| %>
		<%= form.label "Marca" %>	
		<%= form.select :supplier_id, @suppliers.collect {|s| [s.name, s.id]}, include_blank: true	%>
		<%= form.label "Categoria"	%>	
		<%= form.select :product_category_id, @product_categories.collect {|pc| [pc.name, pc.id]}, include_blank: true	%>
		<%= render partial: "product_autocomplete", locals: {form: form} %>
		<%= render partial: "shared/dynamic_subcat_dropdown", locals: {form: form} %>
		<%= submit_tag "Buscar", {class: "btn btn-primary"}	%>
	<% end %>
	<br><br>
	<hr>
	<br>
	<% if request.post?	%>
		<% unless @products.empty?	%>
			<table class="table table-striped">
				<tr><th>Nombre	</th>	<th>Marca	</th>	<th>Categoria	</th>	<th>Imagen	</th></tr>
				<% @products.each do |product|	%>
					<tr><td><%= link_to product.name, admin_product_path(product)		%>	</td>
						<td><%= product.supplier.name									%>	</td>
						<td><%= product.product_category.nil? ? "" : product.product_category.name	%>	</td>
						<td><%= product.image_filename.nil? ? "" : image_tag(product.image_filename, :size => "40x40")			%>	</td>
						<td><%= link_to "Modificar", edit_admin_product_path(product)	%>	</td>
						<td><%= button_to("Eliminar", admin_product_path(product),method: :delete) 			%>	</td>
					</tr>
				<% end %>
			</table>
		<% else %>
			<p>No hay productos que coincidan con su criterio de busqueda.  Por favor intente de nuevo.</p>
		<% end 	%>
	<% end %>
	<br><br>
	<hr>
	<br>
	<%= link_to "Crear Nuevo Producto", new_admin_product_path	%>
